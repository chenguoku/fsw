!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init(t,n)}return a(e,[{key:"init",value:function(e,t){this.listElm=document.getElementById(e),this.data=t||[{testPageId:0,type:1,findex:"",question:"",options:[],answer:[]},{testPageId:0,type:1,findex:"",question:"",options:[],answer:[]},{testPageId:0,type:1,findex:"",question:"",options:[],answer:[]}],this.itemNum=this.data.length,this.questionCount=document.querySelector('.alert-body [name="questionCount"]'),this.addQuestion=document.querySelector(".addQuestion"),this.alert=document.querySelector(".alert-body-wrap"),this.alertForm=document.querySelector(".alert"),this.initList(),this.event()}},{key:"initList",value:function(){for(var e=[],t=0;t<this.itemNum;t++)!Array.isArray(this.data[t].options)&&(this.data[t].options=this.data[t].options.split(" ")),e.push(this.itemHtmlTpl(t,this.data[t]));this.questionCount.value=this.itemNum,this.listElm.innerHTML=e.join(""),this.onloadEvent()}},{key:"event",value:function(){var e=this;this.addQuestion.onclick=function(){e.addItem()},this.alertForm.onsubmit=function(){return e.validateForm()}}},{key:"validateForm",value:function(){var e=!0;return document.querySelectorAll('[name="questionName"]').forEach(function(t){console.log(t.value.trim()),t.value.trim()||(e=!1)}),e||alert("有未填写的题目！"),e}},{key:"onloadEvent",value:function(){var e=this,t=document.querySelectorAll(".question_type1"),n=document.querySelectorAll(".question_type2"),a=document.querySelectorAll(".answer-wrap"),i=document.querySelectorAll(".remove");t.forEach(function(t,n){t.onclick=function(){a[n].innerHTML='\n                    <P>正确答案：</P>\n                    \x3c!-- 单选 --\x3e\n                    <input type="radio" name="answer_'+n+'" value="A" id="A_'+n+'">\n                    <label for="A_'+n+'">A</label>\n                    <input type="radio" name="answer_'+n+'" value="B" id="B_'+n+'">\n                    <label for="B_'+n+'">B</label>\n                    <input type="radio" name="answer_'+n+'" value="C" id="C_'+n+'">\n                    <label for="C_'+n+'">C</label>\n                    <input type="radio" name="answer_'+n+'" value="D" id="D_'+n+'">\n                    <label for="D_'+n+'">D</label>\n                    <input type="radio" name="answer_'+n+'" value="E" id="E_'+n+'">\n                    <label for="E_'+n+'">E</label>\n                ',e.data[n].type=1,e.data[n].answer=[],a.forEach(function(t,n){t.onclick=function(t){var a=t.target;if("INPUT"!==!a.tagName)if(1===e.data[n].type)a.checked&&(0===e.data[n].answer.length?e.data[n].answer.push(a.value):e.data[n].answer.splice(0,1,a.value));else if(a.checked)e.data[n].answer.push(a.value);else{var i=0;e.data[n].answer.forEach(function(e,t){e==a.value&&(i=t)}),e.data[n].answer.splice(i,1)}}})}}),n.forEach(function(t,n){t.onclick=function(){a[n].innerHTML='\n                    <P>正确答案：</P>\n                    \x3c!-- 多选 --\x3e\n                    <input type="checkbox" name="answer_'+n+'" value="A" id="A_'+n+'">\n                    <label for="A_'+n+'">A</label>\n                    <input type="checkbox" name="answer_'+n+'" value="B" id="B_'+n+'">\n                    <label for="B_'+n+'">B</label>\n                    <input type="checkbox" name="answer_'+n+'" value="C" id="C_'+n+'">\n                    <label for="C_'+n+'">C</label>\n                    <input type="checkbox" name="answer_'+n+'" value="D" id="D_'+n+'">\n                    <label for="D_'+n+'">D</label>\n                    <input type="checkbox" name="answer_'+n+'" value="E" id="E_'+n+'">\n                    <label for="E_'+n+'">E</label>\n                ',e.data[n].type=2,e.data[n].answer=[],a.forEach(function(t,n){t.onclick=function(t){var a=t.target;if("INPUT"!==!a.tagName)if(1===e.data[n].type)a.checked&&(0===e.data[n].answer.length?e.data[n].answer.push(a.value):e.data[n].answer.splice(0,1,a.value));else if(a.checked)e.data[n].answer.push(a.value);else{var i=0;e.data[n].answer.forEach(function(e,t){e==a.value&&(i=t)}),e.data[n].answer.splice(i,1)}}})}}),i.forEach(function(t,n){t.onclick=function(){e.removeItem(n)}}),a.forEach(function(t,n){t.onclick=function(t){var a=t.target;if("INPUT"!==!a.tagName)if(1===e.data[n].type)a.checked&&(0===e.data[n].answer.length?e.data[n].answer.push(a.value):e.data[n].answer.splice(0,1,a.value));else if(a.checked)e.data[n].answer.push(a.value);else{var i=0;e.data[n].answer.forEach(function(e,t){e==a.value&&(i=t)}),e.data[n].answer.splice(i,1)}}});for(var o=document.querySelectorAll('[name="questionName"]'),l=document.querySelectorAll('[name="questionIndex"]'),r=document.querySelectorAll('[name="A"]'),u=document.querySelectorAll('[name="B"]'),s=document.querySelectorAll('[name="C"]'),c=document.querySelectorAll('[name="D"]'),d=document.querySelectorAll('[name="E"]'),v=function(t){o[t].onkeyup=function(){e.data[t].question=o[t].value},l[t].onkeyup=function(){l[t].value=l[t].value.replace(/[^\d]/g,""),e.data[t].findex=l[t].value},r[t].onkeyup=function(){e.data[t].options[0]=r[t].value},u[t].onkeyup=function(){e.data[t].options[1]=u[t].value},s[t].onkeyup=function(){e.data[t].options[2]=s[t].value},c[t].onkeyup=function(){e.data[t].options[3]=c[t].value},d[t].onkeyup=function(){e.data[t].options[4]=d[t].value}},f=0;f<r.length;f++)v(f)}},{key:"addItem",value:function(){this.data.push({testPageId:0,type:1,findex:"",question:"",options:[],answer:[]}),this.itemNum=this.data.length,this.initList(),this.alert.scrollTo(0,this.alert.scrollHeight),this.questionCount.value=this.itemNum}},{key:"removeItem",value:function(e){this.data.splice(e,1),this.itemNum=this.data.length,this.initList()}},{key:"itemHtmlTpl",value:function(e,t){var n=['\n            <div class="question-wrap">\n                <div>\n                    <label for="questionName_'+e+'">题目：</label>\n                    <input type="text" name="questionName" id="questionName_'+e+'" value="'+t.question+'">\n                    \x3c!-- 单选多选,递增name,id --\x3e\n                    <input type="radio" class="question_type1" name="questionType_'+e+'" value="1" id="type'+e+'_1" '+(1===t.type?"checked":"")+'>\n                    <label for="type'+e+'_1">单选</label>\n                    <input type="radio" class="question_type2" name="questionType_'+e+'" value="2" id="type'+e+'_2" '+(2===t.type?"checked":"")+'>\n                    <label for="type'+e+'_2">多选</label>\n                    \x3c!-- value为试卷id的值，0是添加，其余为修改 --\x3e\n                    <input type="hidden" name="questionId" value="'+t.testPageId+'">\n                </div>\n                <div>\n                    <label for="questionIndex_'+e+'">排序：</label>\n                    <input type="text" name="questionIndex" id="questionIndex_'+e+'" value="'+t.findex+'" maxlength="4">\n                    <span>数字越小排名越靠前</span>\n                </div>\n                \x3c!-- 选项 --\x3e\n                <div class="option-wrap">\n                    <label>A：</label>\n                    <input type="text" name="A" value="'+(void 0===t.options[0]?"":t.options[0])+'">\n                    <label>B：</label>\n                    <input type="text" name="B" value="'+(void 0===t.options[1]?"":t.options[1])+'">\n                    <label>C：</label>\n                    <input type="text" name="C" value="'+(void 0===t.options[2]?"":t.options[2])+'">\n                    <label>D：</label>\n                    <input type="text" name="D" value="'+(void 0===t.options[3]?"":t.options[3])+'">\n                    <label>E：</label>\n                    <input type="text" name="E" value="'+(void 0===t.options[4]?"":t.options[4])+'">\n                </div>\n                \x3c!-- 正确答案 --\x3e\n                <div class="answer-wrap">\n                    <P>正确答案：</P>'];return 1===t.type?n.push('\n                \x3c!-- 单选 --\x3e\n                <input type="radio" name="answer_'+e+'" value="A" id="A_'+e+'" '+("A"===t.answer[0]?"checked":"")+'>\n                <label for="A_'+e+'">A</label>\n                <input type="radio" name="answer_'+e+'" value="B" id="B_'+e+'" '+("B"===t.answer[0]?"checked":"")+'>\n                <label for="B_'+e+'">B</label>\n                <input type="radio" name="answer_'+e+'" value="C" id="C_'+e+'" '+("C"===t.answer[0]?"checked":"")+'>\n                <label for="C_'+e+'">C</label>\n                <input type="radio" name="answer_'+e+'" value="D" id="D_'+e+'" '+("D"===t.answer[0]?"checked":"")+'>\n                <label for="D_'+e+'">D</label>\n                <input type="radio" name="answer_'+e+'" value="E" id="E_'+e+'" '+("E"===t.answer[0]?"checked":"")+'>\n                <label for="E_'+e+'">E</label>\n            '):n.push('\n                \x3c!-- 多选 --\x3e\n                <input type="checkbox" name="answer_'+e+'" value="A" id="A_'+e+'" '+(-1!==t.answer.indexOf("A")?"checked":"")+'>\n                <label for="A_'+e+'">A</label>\n                <input type="checkbox" name="answer_'+e+'" value="B" id="B_'+e+'" '+(-1!==t.answer.indexOf("B")?"checked":"")+'>\n                <label for="B_'+e+'">B</label>\n                <input type="checkbox" name="answer_'+e+'" value="C" id="C_'+e+'" '+(-1!==t.answer.indexOf("C")?"checked":"")+'>\n                <label for="C_'+e+'">C</label>\n                <input type="checkbox" name="answer_'+e+'" value="D" id="D_'+e+'" '+(-1!==t.answer.indexOf("D")?"checked":"")+'>\n                <label for="D_'+e+'">D</label>\n                <input type="checkbox" name="answer_'+e+'" value="E" id="E_'+e+'" '+(-1!==t.answer.indexOf("E")?"checked":"")+'>\n                <label for="E_'+e+'">E</label>\n            '),n.push('\n                </div>\n                <span class="remove">x</span>\n            </div>\n        '),n.join("")}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init(t,n)}return a(e,[{key:"init",value:function(e,t){this.listId=document.getElementById(e),this.items=this.listId.querySelectorAll("li"),this.curr,this.event(),void 0!==t&&"number"==typeof t&&this.active(t)}},{key:"event",value:function(){var e=this;this.items.forEach(function(t,n){t.addEventListener("click",function(){e.active(n)})})}},{key:"active",value:function(e){e!==this.curr&&(this.items[e].classList.add("active"),"number"==typeof this.curr&&this.items[this.curr].classList.remove("active"),this.curr=e,this.callback(this.items[e],e))}},{key:"callback",value:function(e,t){}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"init",value:function(e,t,n,a){this.url=e,this.type=t,this.data=n,this.callback=a,this.request()}},{key:"getData",value:function(){var e=[];for(var t in this.data)this.data.hasOwnProperty(t)&&e.push(encodeURIComponent(t)+"="+encodeURIComponent(this.data[t]));return e.join("&")}},{key:"request",value:function(){var e=this,t=this.getData();if(t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState?e.callback(JSON.parse(n.responseText),n):console.log(n.status)},n.open(this.type,this.url+("get"===this.type?"?"+t:"")),"post"===this.type&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send("get"===this.type?null:t)}}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(t,n,a,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init(t,n,a,i)}return a(e,[{key:"init",value:function(e,t,n,a){this.showElem=document.querySelector(e),this.setElem=document.querySelector(t),this.activeElem=document.querySelector(n),this.alertElem=document.querySelector(a),this.event()}},{key:"event",value:function(){var e=this;this.showElem.addEventListener("click",function(){e.active()}),this.setElem&&this.setElem.addEventListener("click",function(){e.active()}),this.activeElem.addEventListener("click",function(t){var n=t.target.className;e.activeElem.className!==n&&"alert-btn active"!==n||e.close()})}},{key:"active",value:function(){this.activeElem.classList.add("active")}},{key:"close",value:function(){this.activeElem.classList.remove("active")}}]),e}();t.default=i},function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(11),n(6);var i=u(n(3)),o=u(n(2)),l=u(n(1)),r=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}return a(e,[{key:"init",value:function(){new i.default(".videoAdd",".a",".alert",".a"),this.videoAdd=document.querySelector(".videoAdd"),this.alert=document.querySelector(".alert"),this.alertTitle=document.querySelector(".alert h1"),this.videoName=document.getElementById("videoName"),this.videoIndex=document.getElementById("videoIndex"),this.testPageId=document.querySelector('.alert-body [name="testPageId"]'),this.questionCount=document.querySelector('.alert-body [name="questionCount"]'),this.ajax=new o.default,this.table=document.querySelector(".body table"),this.page=document.querySelector(".page"),this.pageNow=1,this.getCourseId(),this.getVideoData(),this.event()}},{key:"event",value:function(){var e=this;this.videoAdd.addEventListener("click",function(){e.alertTitle.innerText="新增试卷",e.videoName.value="",e.videoIndex.value="",e.testPageId.value=0,e.questionCount.value=3,new r.default("alert-list")})}},{key:"renderPage",value:function(){var e=this;if(0!==this.videoData.length){var t=this.pageHtmlTpl();this.page.innerHTML=t,""!==t&&(this.pageRadio=new l.default("page",this.pageNow-1),this.pageRadio.callback=function(t,n){e.paging(n)})}}},{key:"renderVideoList",value:function(){var e=this;this.table.innerHTML=this.videoListHtmlTpl(),0!==this.videoData.length&&(document.querySelectorAll(".editVideo").forEach(function(t,n){t.addEventListener("click",function(){var n=t.parentNode.id,a=t.parentNode.parentNode.children[0].innerText,i=t.parentNode.parentNode.children[1].innerText;console.log("testId: %s, index: %s, name: %s",n,a,i),e.ajax.init("/fsw2.1/testPage/testQuestion.html","get",{testPageId:n},function(t){var o=t.status,l=(t.msg,t.data);200===o&&(e.alertTitle.innerText="修改试卷",e.videoName.value=i,e.videoIndex.value=a,e.testPageId.value=n,e.questionCount.value=l.length,new r.default("alert-list",l),e.alert.classList.add("active"))}.bind(e))})}),document.querySelectorAll(".removeVideo").forEach(function(t,n){t.addEventListener("click",function(){e.removeVideoId=parseInt(t.parentNode.id),e.ajax.init("/fsw2.1/course/remove/testPage.html","get",{id:e.removeVideoId},e.removeVideoCallBack.bind(e))})}))}},{key:"removeVideoCallBack",value:function(e){var t=e.status;e.msg,200===t&&(this.removeVideoById(this.removeVideoId),this.renderVideoList(),this.renderPage())}},{key:"removeVideoById",value:function(e){var t=this;this.videoData.forEach(function(n,a){n.id===e&&t.videoData.splice(a,1)})}},{key:"getCourseId",value:function(){var e=document.querySelector(".courseId").value;e=parseInt(e),isNaN(e)&&(e=0),this.courseId=e}},{key:"getVideoData",value:function(){var e=this;this.ajax.init("/fsw2.1/select/course/testpage.html","get",{courseId:this.courseId},function(t){var n=t.status,a=(t.msg,t.data);200===n&&(e.videoData=a,e.renderVideoList(),e.renderPage())}.bind(this))}},{key:"videoListHtmlTpl",value:function(){var e=["\n            <tr>\n                <td>排序</td>\n                <td>试卷名称</td>\n                <td>操作</td>\n            </tr>\n        "],t=this.videoData.length;if(0!==t)for(var n=t%10==0?t/10:parseInt(t/10)+1,a=10*(this.pageNow-1),i=this.pageNow===n?t-1:10*this.pageNow-1,o=a;o<=i;o++)e.push("\n                    <tr>\n                        <td>"+this.videoData[o].findex+"</td>\n                        <td>"+this.videoData[o].title+'</td>\n                        <td id="'+this.videoData[o].id+'">\n                            <span class="editVideo">编辑</span>\n                            <span class="removeVideo">删除</span>\n                        </td>\n                    </tr>\n                ');return e.join("")}},{key:"pageHtmlTpl",value:function(){for(var e=[],t=this.videoData.length,n=t%10==0?t/10:parseInt(t/10)+1,a=1;n>1&&a<=n;)e.push("<li>"+a+"</li>"),a++;return e.join("")}},{key:"paging",value:function(e){this.pageNow=e+1,this.renderVideoList()}}]),e}())},,function(e,t){},,,,,function(e,t){}]);